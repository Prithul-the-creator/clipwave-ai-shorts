# Manual YouTube Cookie Extraction Guide

If the automatic cookie extraction fails, you can manually extract YouTube cookies using browser extensions.

## üç™ Method 1: Using Cookie Editor Extension

### Step 1: Install Cookie Editor Extension
1. **Chrome/Edge**: Install [Cookie Editor](https://chrome.google.com/webstore/detail/cookie-editor/hlkenndednhfkekhgcdicdfddnkalmdm)
2. **Firefox**: Install [Cookie Editor](https://addons.mozilla.org/en-US/firefox/addon/cookie-editor/)

### Step 2: Extract YouTube Cookies
1. Go to [YouTube](https://www.youtube.com)
2. Make sure you're logged in (optional but recommended)
3. Open Cookie Editor extension
4. Click "Export" ‚Üí "Export as Netscape HTTP Cookie File"
5. Save the file as `cookies/youtube_cookies.txt`

### Step 3: Clean and Encode Cookies
```bash
# Run the cookie processing script
python generate_youtube_cookies.py
```

## üç™ Method 2: Using yt-dlp Directly

### Step 1: Extract Cookies from Browser
```bash
# Try Chrome
yt-dlp --cookies-from-browser chrome --cookies cookies/youtube_cookies.txt

# Try Firefox
yt-dlp --cookies-from-browser firefox --cookies cookies/youtube_cookies.txt

# Try Safari
yt-dlp --cookies-from-browser safari --cookies cookies/youtube_cookies.txt
```

### Step 2: Test the Cookies
```bash
# Test with a simple video
yt-dlp --cookies cookies/youtube_cookies.txt --format "best[height<=480]" --output test_video.mp4 "https://www.youtube.com/watch?v=dQw4w9WgXcQ"
```

## üç™ Method 3: Manual Cookie Creation

If all else fails, create a minimal cookies file:

### Step 1: Create Basic Cookies File
Create `cookies/youtube_cookies.txt` with this content:

```
# Netscape HTTP Cookie File
# This file is generated by yt-dlp.  Do not edit.

.youtube.com	TRUE	/	FALSE	1735689600	VISITOR_INFO1_LIVE	your_visitor_info_here
.youtube.com	TRUE	/	FALSE	1735689600	LOGIN_INFO	your_login_info_here
.youtube.com	TRUE	/	FALSE	1735689600	PREF	your_pref_here
```

### Step 2: Get Cookie Values
1. Open YouTube in your browser
2. Open Developer Tools (F12)
3. Go to Application/Storage ‚Üí Cookies ‚Üí youtube.com
4. Copy values for important cookies like:
   - `VISITOR_INFO1_LIVE`
   - `LOGIN_INFO` (if logged in)
   - `PREF`
   - `SID`
   - `HSID`
   - `SSID`
   - `APISID`
   - `SAPISID`

### Step 3: Update Cookies File
Replace the placeholder values with actual cookie values from your browser.

## üîß Processing Your Cookies

Once you have a cookies file, process it:

```bash
# Run the cookie processing script
python generate_youtube_cookies.py
```

This will:
1. ‚úÖ Validate the cookie format
2. ‚úÖ Clean malformed entries
3. ‚úÖ Encode to base64
4. ‚úÖ Create environment variables
5. ‚úÖ Test the cookies

## üìù Environment Variables

After processing, you'll get:

1. **Base64 encoded cookies** for Railway deployment
2. **Cleaned cookies file** for local development
3. **Environment example** file

### For Railway Deployment
Add this environment variable:
```
YOUTUBE_COOKIES_B64=your_base64_encoded_cookies_here
```

### For Local Development
Create a `.env` file:
```
YOUTUBE_COOKIES_B64=your_base64_encoded_cookies_here
YOUTUBE_COOKIES_FILE=cookies/youtube_cookies_cleaned.txt
```

## üß™ Testing Your Cookies

Test your cookies with the application:

```bash
# Test the API endpoints
curl http://localhost:8000/api/test-download
curl http://localhost:8000/api/test-403-handling
```

## üí° Tips for Better Cookies

1. **Log into YouTube** before extracting cookies
2. **Use incognito/private browsing** for clean cookies
3. **Extract cookies frequently** (they expire)
4. **Test with different videos** to ensure compatibility
5. **Keep cookies minimal** - only include YouTube-specific cookies

## üö® Common Issues

### "Invalid cookie format"
- Ensure cookies follow Netscape format
- Check for tabs (not spaces) between fields
- Verify 7 fields per line

### "Cookies expired"
- Extract fresh cookies
- Log into YouTube again
- Clear browser cookies and re-login

### "403 Forbidden"
- Try without cookies first
- Use different user agents
- Check if video is age-restricted

## üîÑ Updating Cookies

Cookies expire, so update them regularly:

1. **Monthly**: Extract fresh cookies
2. **After errors**: Re-extract if downloads fail
3. **After browser updates**: Re-extract after browser updates
4. **After YouTube changes**: Re-extract if YouTube changes their system 